dist: xenial
language: python
python:
  - "3.6"
  - "3.7"
env:
  matrix:
    - DJANGO_VERSION=2.2
    - DJANGO_VERSION=dev
matrix:
  exclude:
    - python: 3.6
      env: DJANGO_VERSION=2.2
    - python: 3.6
      env: DJANGO_VERSION=dev
    - python: 3.7
      env: DJANGO_VERSION=2.2
    - python: 3.7
      env: DJANGO_VERSION=dev
install:
  - pip install tox
  - if [[ $DJANGO_VERSION == dev ]]; then pip
   install https://github.com/django/django/tarball/master/django.tar.gz#egg=django; else pip
   install -q Django==$DJANGO_VERSION; fi
script: tox
deploy:
  provider: pypi
  user: $PYPI_USER
  password: $PYPI_PASSWORD
  on:
    tags: true
